{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Створення галереї зображень\nexport function markupGallery(images) {\n  return images\n    .map(\n      i => ` <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${i.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${i.webformatURL}\"\n              alt=\"${i.tags}\"\n              width=\"360\"\n              height=\"152\"\n          /></a>\n          <div class=\"parameters-block\">\n            <div class=\"parameter\">\n              <h2 class=\"title\">Likes</h2>\n              <p class=\"amount\">${i.likes}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Views</h2>\n              <p class=\"amount\">${i.views}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Comments</h2>\n              <p class=\"amount\">${i.comments}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Downloads</h2>\n              <p class=\"amount\">${i.downloads}</p>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n","// Додавання бібліотеки Axios\nimport axios from 'axios';\n\nconst API_KEY = '42417927-02b658e2f5610bf7e034ab0b0';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// Запит до Pixabay API\nexport async function getPictures(query, perPage, pageNumber) {\n  const response = await axios.get(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: pageNumber,\n    },\n  });\n  return response.data;\n}\n","// Додавання бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// Додавання бібліотеки SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { markupGallery } from './js/render-functions.js';\nimport { getPictures } from './js/pixabay-api.js';\n\nconst list = document.querySelector('.gallery');\nconst fetcImageForm = document.querySelector('form');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn-load');\nconst galleryCard = document.querySelector('.gallery');\n\n//Ініціалізація бібліотеки SimpleLightbox та налаштування опций модального вікна\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nlet searchQuery = '';\nconst perPage = 15; // Кількість зображень що повертаються за один запит\nlet pageNumber = 1;\nlet totalPages = 0;\n\nfetcImageForm.addEventListener('submit', fetchImage);\nbtnLoad.addEventListener('click', getNextImages);\n\nasync function fetchImage(event) {\n  event.preventDefault();\n  list.innerHTML = '';\n  pageNumber = 1;\n\n  btnLoad.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  searchQuery = event.target.elements.search.value.trim();\n\n  try {\n    const data = await getPictures(searchQuery, perPage, pageNumber);\n\n    // Перевірка наявності зображень відповідних запиту\n    if (!data.hits.length) {\n      //  Повідомлення про відсутність зображення відповідно запиту / Ініціаналізація бібліотеки iziToast\n      iziToast.error({\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n        transitionIn: 'bounceInDown',\n        theme: 'dark',\n        messageColor: '#ffffff',\n        messageSize: 16,\n        messageLineHeight: 24,\n        color: '#ef4040',\n        progressBar: false,\n        position: 'topRight',\n        maxWidth: 432,\n      });\n      return;\n    }\n\n    // Обчислення кількості сторінок завантаження\n    totalPages = Math.ceil(data.totalHits / perPage);\n\n    // Перевірка, чи це остання завантажена сторінка?\n    if (pageNumber === totalPages) {\n      //  Повідомлення про досягнення кінця результатів запиту / Ініціаналізація бібліотеки iziToast\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        transitionIn: 'bounceInDown',\n        theme: 'dark',\n        messageColor: '#ffffff',\n        messageSize: 16,\n        messageLineHeight: 24,\n        color: '#0099FF',\n        progressBar: false,\n        position: 'topRight',\n        maxWidth: 432,\n      });\n    } else {\n      btnLoad.classList.remove('is-hidden');\n    }\n    // Відображення галереї зображень відповідно запиту\n    const markup = markupGallery(data.hits);\n    list.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  } catch (error) {\n    //   Повідомлення про тип помилки\n    iziToast.error({\n      message: `${error}`,\n      transitionIn: 'bounceInDown',\n      theme: 'dark',\n      messageColor: '#ffffff',\n      messageSize: 16,\n      messageLineHeight: 24,\n      color: '#ef4040',\n      progressBar: false,\n      position: 'topRight',\n      maxWidth: 432,\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n    event.target.reset();\n  }\n}\n\n// Функція по кліку на Load more «Завантажити ще»\nasync function getNextImages(event) {\n  btnLoad.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  pageNumber += 1;\n\n  try {\n    const data = await getPictures(searchQuery, perPage, pageNumber);\n    // Відображення галереї зображень відповідно запиту\n    const markup = markupGallery(data.hits);\n    list.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    btnLoad.classList.remove('is-hidden');\n\n    smoothGalleryScroll();\n\n    // Перевірка, чи це остання завантажена сторінка?\n    if (pageNumber === totalPages) {\n      //  Повідомлення про досягнення кінця результатів запиту / Ініціаналізація бібліотеки iziToast\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        transitionIn: 'bounceInDown',\n        theme: 'dark',\n        messageColor: '#ffffff',\n        messageSize: 16,\n        messageLineHeight: 24,\n        color: '#0099FF',\n        progressBar: false,\n        position: 'topRight',\n        maxWidth: 432,\n      });\n      btnLoad.classList.add('is-hidden');\n    }\n  } catch (error) {\n    //   Повідомлення про тип помилки\n    iziToast.error({\n      message: `${error}`,\n      transitionIn: 'bounceInDown',\n      theme: 'dark',\n      messageColor: '#ffffff',\n      messageSize: 16,\n      messageLineHeight: 24,\n      color: '#ef4040',\n      progressBar: false,\n      position: 'topRight',\n      maxWidth: 432,\n    });\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n}\n\n// Функція плавного скролу галереї\nfunction smoothGalleryScroll() {\n  // Функція що повертає обє'єкт, з якого отримуємо значення висоти карточки\n  let cardHeight = galleryCard.firstElementChild.getBoundingClientRect().height;\n  // Плавний скрол методом window.scrollBy\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["markupGallery","images","i","API_KEY","BASE_URL","getPictures","query","perPage","pageNumber","axios","list","fetcImageForm","loader","btnLoad","galleryCard","lightbox","SimpleLightbox","searchQuery","totalPages","fetchImage","getNextImages","event","data","iziToast","markup","error","smoothGalleryScroll","cardHeight"],"mappings":"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"}