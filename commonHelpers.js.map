{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Створення галереї зображень\nexport function markupGallery(images) {\n  return images\n    .map(\n      i => ` <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${i.largeImageURL}\">\n            <img\n              class=\"gallery-image\"\n              src=\"${i.webformatURL}\"\n              alt=\"${i.tags}\"\n              width=\"360\"\n              height=\"152\"\n          /></a>\n          <div class=\"parameters-block\">\n            <div class=\"parameter\">\n              <h2 class=\"title\">Likes</h2>\n              <p class=\"amount\">${i.likes}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Views</h2>\n              <p class=\"amount\">${i.views}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Comments</h2>\n              <p class=\"amount\">${i.comments}</p>\n            </div>\n            <div class=\"parameter\">\n              <h2 class=\"title\">Downloads</h2>\n              <p class=\"amount\">${i.downloads}</p>\n            </div>\n          </div>\n        </li>`\n    )\n    .join('');\n}\n","// Додавання бібліотеки Axios\nimport axios from 'axios';\n\n// Запит до Pixabay API\nexport async function getPictures(query, perPage, pageNumber) {\n  const API_KEY = '42417927-02b658e2f5610bf7e034ab0b0';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const response = await axios.get(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: perPage,\n      page: pageNumber,\n    },\n  });\n  return response.data;\n}\n","// Додавання бібліотеки iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// Додавання бібліотеки SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { markupGallery } from './js/render-functions.js';\nimport { getPictures } from './js/pixabay-api.js';\n\nconst list = document.querySelector('.gallery');\nconst fetcImageForm = document.querySelector('form');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn-load');\n\n//Ініціалізація бібліотеки SimpleLightbox та налаштування опций модального вікна\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nlet searchQuery = '';\nconst perPage = 15; // Кількість зображень що повертаються за один запит\nlet pageNumber = 1;\nlet totalPages = 0;\n\nfetcImageForm.addEventListener('submit', fetchImage);\nbtnLoad.addEventListener('click', getNextImages);\n\nfunction fetchImage(event) {\n  event.preventDefault();\n  list.innerHTML = '';\n  pageNumber = 1;\n\n  btnLoad.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  searchQuery = event.target.elements.search.value.trim();\n\n  getPictures(searchQuery, perPage, pageNumber)\n    .then(response => {\n      // Перевірка наявності зображень відповідних запиту\n      if (!response.hits.length) {\n        //  Повідомлення про відсутність зображення відповідно запиту / Ініціаналізація бібліотеки iziToast\n        iziToast.error({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n          transitionIn: 'bounceInDown',\n          theme: 'dark',\n          messageColor: '#ffffff',\n          messageSize: 16,\n          messageLineHeight: 24,\n          color: '#ef4040',\n          progressBar: false,\n          position: 'topRight',\n          maxWidth: 432,\n        });\n        return;\n      }\n\n      // Обчислення кількості сторінок завантаження\n      totalPages = Math.ceil(response.totalHits / perPage);\n\n      // Перевірка, чи це остання завантажена сторінка?\n      if (pageNumber === totalPages) {\n        //  Повідомлення про досягнення кінця результатів запиту / Ініціаналізація бібліотеки iziToast\n        iziToast.info({\n          message: `We're sorry, but you've reached the end of search results.`,\n          transitionIn: 'bounceInDown',\n          theme: 'dark',\n          messageColor: '#ffffff',\n          messageSize: 16,\n          messageLineHeight: 24,\n          color: '#0099FF',\n          progressBar: false,\n          position: 'topRight',\n          maxWidth: 432,\n        });\n      } else {\n        btnLoad.classList.remove('is-hidden');\n      }\n      // Відображення галереї зображень відповідно запиту\n      const markup = markupGallery(response.hits);\n      list.insertAdjacentHTML('beforeend', markup);\n\n      lightbox.refresh();\n      event.target.reset();\n    })\n    .catch(error => {\n      //   Повідомлення про тип помилки\n      iziToast.error({\n        message: `${error}`,\n        transitionIn: 'bounceInDown',\n        theme: 'dark',\n        messageColor: '#ffffff',\n        messageSize: 16,\n        messageLineHeight: 24,\n        color: '#ef4040',\n        progressBar: false,\n        position: 'topRight',\n        maxWidth: 432,\n      });\n      btnLoad.classList.add('is-hidden');\n    })\n\n    .finally(() => {\n      loader.classList.add('is-hidden');\n    });\n}\n\n// Функція по кліку на Load more «Завантажити ще»\nfunction getNextImages(event) {\n  btnLoad.classList.add('is-hidden');\n  loader.classList.remove('is-hidden');\n\n  pageNumber += 1;\n\n  getPictures(searchQuery, perPage, pageNumber)\n    .then(response => {\n      // Відображення галереї зображень відповідно запиту\n      const markup = markupGallery(response.hits);\n      list.insertAdjacentHTML('beforeend', markup);\n\n      lightbox.refresh();\n      btnLoad.classList.remove('is-hidden');\n\n      smoothGalleryScroll();\n\n      // Перевірка, чи це остання завантажена сторінка?\n      if (pageNumber === totalPages) {\n        //  Повідомлення про досягнення кінця результатів запиту / Ініціаналізація бібліотеки iziToast\n        iziToast.info({\n          message: `We're sorry, but you've reached the end of search results.`,\n          transitionIn: 'bounceInDown',\n          theme: 'dark',\n          messageColor: '#ffffff',\n          messageSize: 16,\n          messageLineHeight: 24,\n          color: '#0099FF',\n          progressBar: false,\n          position: 'topRight',\n          maxWidth: 432,\n        });\n        btnLoad.classList.add('is-hidden');\n      }\n    })\n    .catch(error => {\n      //   Повідомлення про тип помилки\n      iziToast.error({\n        message: `${error}`,\n        transitionIn: 'bounceInDown',\n        theme: 'dark',\n        messageColor: '#ffffff',\n        messageSize: 16,\n        messageLineHeight: 24,\n        color: '#ef4040',\n        progressBar: false,\n        position: 'topRight',\n        maxWidth: 432,\n      });\n    })\n\n    .finally(() => {\n      loader.classList.add('is-hidden');\n    });\n}\n\n// Функція плавного скролу галереї\nfunction smoothGalleryScroll() {\n  //Отримуємо посилання на елемент галереї\n  const galleryCard = document.querySelector('.gallery-item');\n  // Функція що повертає обє'єкт, з якого отримуємо значення висоти карточки\n  let cardHeight = galleryCard.getBoundingClientRect().height;\n\n  // Плавний скрол методом window.scrollBy\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["markupGallery","images","i","getPictures","query","perPage","pageNumber","API_KEY","BASE_URL","axios","list","fetcImageForm","loader","btnLoad","lightbox","SimpleLightbox","searchQuery","totalPages","fetchImage","getNextImages","event","response","iziToast","markup","error","smoothGalleryScroll","cardHeight"],"mappings":"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"}